import{r as o,u as v,j as e,H as I,L as N}from"./app-BAkLfMZa.js";import{A as T}from"./AuthenticatedLayout-Cp4WYyIw.js";import{P as x}from"./PrimaryButton-CaqhELf4.js";import"./transition-JKCrelju.js";import"./ApplicationLogo-Dq1OFvyN.js";function B({events:l,attendanceDates:c}){const[w,g]=o.useState(!1),[i,n]=o.useState(null),[k,f]=o.useState(!1),[h,p]=o.useState(null),{data:b,setData:y,post:S,processing:E,errors:d,reset:j}=v({name:"",datetime:""}),s=v({name:"",datetime:""});function C(t){n(t),g(!0),j()}function m(){n(null),g(!1),j()}function D(t){t.preventDefault(),i&&S(route("moderator.attendance.store",i),{onSuccess:()=>{m()}})}function A(t,a){n(t),p(a.id),s.setData("name",a.name||""),s.setData("datetime",a.datetime?a.datetime.split(" ")[1]:""),f(!0)}function u(){p(null),n(null),s.reset(),f(!1)}function P(t){t.preventDefault(),!(!i||!h)&&s.put(route("moderator.attendance.update",[i,h]),{onSuccess:()=>u()})}function M(t){return Array.isArray(c)&&c.length>0?c.filter(a=>String(a.event_id)===String(t.id)):Array.isArray(t.attendanceDates)?t.attendanceDates:[]}return e.jsxs(T,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-primary",children:"Attendance Dates"}),children:[e.jsx(I,{title:"Event Attendance Dates"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid gap-6",children:!l||l.length===0?e.jsx("div",{className:"rounded-lg bg-white p-6 shadow",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No events available."})}):l.map(t=>{const a=M(t);return e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500",children:t.location??"-"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{type:"button",onClick:()=>C(t.id),children:"+ Tambah Presensi"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Daftar Presensi"}),a.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Tidak ada presensi."}):e.jsx("ul",{className:"space-y-2",children:a.map(r=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-50 p-3 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-primary",children:r.name??"-"}),e.jsx("div",{className:"text-xs text-gray-500",children:r.datetime?new Date(r.datetime).toLocaleString():"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>A(t.id,r),className:"text-xs items-center rounded-md border border-primary px-4 py-2 font-semibold uppercase tracking-widest text-primary transition duration-150 ease-in-out hover:bg-secondary focus:bg-secondary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 active:bg-gray-900",children:"Edit"}),e.jsx(N,{href:route("moderator.attendance.destroy",[t.id,r.id]),method:"delete",as:"button",onClick:L=>{confirm("Yakin ingin menghapus attendance date ini?")||L.preventDefault()},className:"text-xs items-center rounded-md border border-transparent bg-red-600 px-4 py-2 font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-red-400 focus:bg-red-400 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 active:bg-gray-900",children:"Hapus"}),e.jsx(N,{href:route("moderator.attendance.show",r.id),className:"text-xs items-center rounded-md border border-transparent bg-primary px-4 py-2 font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-secondary focus:bg-secondary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 active:bg-gray-900",children:"Lihat Presensi"})]})]},r.id))})]})]},t.id)})})})}),w&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:m}),e.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4",children:"Tambah Presensi"}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("input",{type:"text",value:b.name,onChange:t=>y("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g. Hari ke 1 / Sesi 1",required:!0}),d.name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Presensi"}),e.jsx("input",{type:"datetime-local",value:b.datetime,onChange:t=>y("datetime",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),d.datetime&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:d.datetime})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:m,className:"text-xs items-center rounded-md border border-gray-600 px-4 py-2 font-semibold uppercase tracking-widest text-gray-600 transition duration-150 ease-in-out hover:bg-gray-400 focus:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 active:bg-gray-900",children:"Cancel"}),e.jsx(x,{type:"submit",disabled:E,children:"Simpan"})]})]})]})]}),k&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-primary mb-4",children:"Edit Presensi"}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("input",{type:"text",value:s.data.name,onChange:t=>s.setData("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),s.errors.name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.errors.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Presensi"}),e.jsx("input",{type:"datetime-local",value:s.data.datetime,onChange:t=>s.setData("datetime",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),s.errors.datetime&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.errors.datetime})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:u,className:"text-xs items-center rounded-md border border-gray-600 px-4 py-2 font-semibold uppercase tracking-widest text-gray-600 transition duration-150 ease-in-out hover:bg-gray-400 focus:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 active:bg-gray-900",children:"Batal"}),e.jsx(x,{type:"submit",disabled:s.processing,children:"Simpan"})]})]})]})]})]})}export{B as default};
