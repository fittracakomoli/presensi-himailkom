import{r as l,u as y,j as e,H as I,L as N}from"./app-CObOAXFW.js";import{A as q}from"./AuthenticatedLayout-CdcLBxJE.js";import"./transition-B1xL1hpX.js";import"./ApplicationLogo-o7-4iz79.js";function _({events:o,attendanceDates:c}){const[v,u]=l.useState(!1),[i,n]=l.useState(null),[w,g]=l.useState(!1),[h,b]=l.useState(null),{data:f,setData:p,post:k,processing:S,errors:r,reset:j}=y({name:"",datetime:""}),s=y({name:"",datetime:""});function A(t){n(t),u(!0),j()}function m(){n(null),u(!1),j()}function D(t){t.preventDefault(),i&&k(route("moderator.attendance.store",i),{onSuccess:()=>{m()}})}function E(t,a){n(t),b(a.id),s.setData("name",a.name||""),s.setData("datetime",a.datetime?a.datetime.split(" ")[1]:""),g(!0)}function x(){b(null),n(null),s.reset(),g(!1)}function C(t){t.preventDefault(),!(!i||!h)&&s.put(route("moderator.attendance.update",[i,h]),{onSuccess:()=>x()})}function M(t){return Array.isArray(c)&&c.length>0?c.filter(a=>String(a.event_id)===String(t.id)):Array.isArray(t.attendanceDates)?t.attendanceDates:[]}return e.jsxs(q,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Attendance Dates"}),children:[e.jsx(I,{title:"Event Attendance Dates"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid gap-6",children:!o||o.length===0?e.jsx("div",{className:"rounded-lg bg-white p-6 shadow",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No events available."})}):o.map(t=>{const a=M(t);return e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500",children:t.location??"-"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:()=>A(t.id),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Add Attendance Date"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Attendance Dates"}),a.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No attendance dates."}):e.jsx("ul",{className:"space-y-2",children:a.map(d=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-50 p-3 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name??"-"}),e.jsx("div",{className:"text-xs text-gray-500",children:d.datetime?new Date(d.datetime).toLocaleString():"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>E(t.id,d),className:"text-xs px-3 py-2 border border-yellow-600 text-yellow-700 rounded hover:bg-yellow-100",children:"Edit"}),e.jsx(N,{href:route("moderator.attendance.destroy",[t.id,d.id]),method:"delete",as:"button",onClick:L=>{confirm("Yakin ingin menghapus attendance date ini?")||L.preventDefault()},className:"text-xs px-3 py-2 border border-red-600 text-red-600 rounded hover:bg-red-100",children:"Hapus"}),e.jsx(N,{href:route("moderator.attendance.show",d.id),className:"text-xs px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Lihat Presensi"})]})]},d.id))})]})]},t.id)})})})}),v&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:m}),e.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Attendance Date"}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("input",{type:"text",value:f.name,onChange:t=>p("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g. Hari ke 1 / Sesi 1",required:!0}),r.name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Presensi"}),e.jsx("input",{type:"datetime-local",value:f.datetime,onChange:t=>p("datetime",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),r.datetime&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:r.datetime})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:m,className:"px-3 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:S,className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"})]})]})]})]}),w&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:x}),e.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Attendance Date"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),e.jsx("input",{type:"text",value:s.data.name,onChange:t=>s.setData("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),s.errors.name&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.errors.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Presensi"}),e.jsx("input",{type:"datetime-local",value:s.data.datetime,onChange:t=>s.setData("datetime",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),s.errors.datetime&&e.jsx("div",{className:"text-red-600 text-sm mt-1",children:s.errors.datetime})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:x,className:"px-3 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Batal"}),e.jsx("button",{type:"submit",disabled:s.processing,className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Simpan"})]})]})]})]})]})}export{_ as default};
